<xml xmlns="https://developers.google.com/blockly/xml"><variables><variable id="NZkrTd+={GW4D0/T`(+u">command</variable><variable id="HnB^tPUPb6HA|iCE^MoL">command_code</variable><variable id="VH3ZuJWh2B.|c{NngUGO">ble_connected</variable><variable id="jaC$%W6J:%CHA7?`dMz!">SYS_PASSWORD</variable></variables><block type="bluetooth_on_data_received" id="{~z-#{,DSNZ!,(vOZ~eb" x="357" y="-288"><value name="delimiters"><shadow type="serial_delimiter_conv" id="U.,tRm^:`%8Ga#akbOPB"><field name="del">Delimiters.Dollar</field></shadow></value><statement name="HANDLER"><block type="serial_writeline" id=":q,vYo?4;59$Gb$}n8(="><value name="text"><block type="text" id="z~rF|-ZZ2nn*n!o5mcm`"><field name="TEXT">received command</field></block></value><next><block type="variables_set" id="^}*p0Werp{XjQtO`:k~a"><field name="VAR" id="NZkrTd+={GW4D0/T`(+u">command</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="bluetooth_uart_read" id="U^ydtE8o.tR;{m3cuZhu"><value name="del"><shadow type="serial_delimiter_conv" id="r2j6RJrNhV(X!n@g{0oH"><field name="del">Delimiters.Dollar</field></shadow></value></block></value><next><block type="variables_set" id="~Vl!ObRWac(7LHcRa,Z!"><field name="VAR" id="HnB^tPUPb6HA|iCE^MoL">command_code</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="string_split" id="oj7iU1f3gx6m.(A:nQ8]"><value name="this"><shadow type="text"><field name="TEXT"/></shadow><block type="variables_get" id="Jsi8T|w}gSx-Y(iXE}ZU"><field name="VAR" id="NZkrTd+={GW4D0/T`(+u">command</field></block></value><value name="separator"><shadow type="text" id="-3KCnau-0,8$qb7ai9Cv"><field name="TEXT">:</field></shadow></value></block></value><next><block type="serial_writeline" id="8c`.=3IjBi}Cro;0l|]G"><value name="text"><block type="text_join" id="VhlbF{HS[:ME_,d(%sSP"><mutation items="2"/><value name="ADD0"><shadow type="text" id="$M,2M^*V{m=LI4MiI;Q3"><field name="TEXT">command code:</field></shadow></value><value name="ADD1"><shadow type="text"><field name="TEXT"/></shadow><block type="lists_index_get" id="$99xLV%@uj|[KRc!TMa!"><value name="LIST"><block type="variables_get" id="9IU@f?|}*2bn_rnI*A{V"><field name="VAR" id="HnB^tPUPb6HA|iCE^MoL">command_code</field></block></value><value name="INDEX"><shadow type="math_number" id="MI4CF9yGfHzu55f-gAIe"><field name="NUM">0</field></shadow></value></block></value></block></value><next><block type="controls_if" id="ES].K#|c-[p9LDd*so~="><mutation elseif="2" else="1"/><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="?q{R1?KFnW2(#sm?`+!="><field name="OP">EQ</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="lists_index_get" id="y6%fHi(Oen70O/$z1XM_"><value name="LIST"><block type="variables_get" id="q1j)B6V|k6iKwJcxk#^F"><field name="VAR" id="HnB^tPUPb6HA|iCE^MoL">command_code</field></block></value><value name="INDEX"><shadow type="math_number" id=".J#auq:l$yghilcgWmyG"><field name="NUM">0</field></shadow></value></block></value><value name="B"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="text" id="y`bSJueM@u?b!b|!tnzV"><field name="TEXT">P</field></block></value></block></value><statement name="DO0"><block type="serial_writeline" id="AaO~HnI-*%bXUq;vp}2C"><value name="text"><shadow type="text" id="|P0lLNu$,P,x.o=Ai5R;"><field name="TEXT">requested password</field></shadow></value><next><block type="function_call" id="6I,Nf$OS?Bi%zGg*S|dC"><mutation name="cmdPassword" functionid="l{g]WzkQ{UUM#.%)vBrv"><arg name="pwd" id="iny9m8oh4ubr22u96zs2" type="string"/></mutation><value name="iny9m8oh4ubr22u96zs2"><shadow type="text" id="$rd^WA.[0Dp;%xr69.1="><field name="TEXT">abc</field></shadow><block type="lists_index_get" id="u*lf?r9wcn=n9#a:F!$I"><value name="LIST"><block type="variables_get" id="vM_z|q+Nzg|1OY3Jj*[9"><field name="VAR" id="HnB^tPUPb6HA|iCE^MoL">command_code</field></block></value><value name="INDEX"><shadow type="math_number" id="}s668/UK(vOd^TYHe]V@"><field name="NUM">1</field></shadow></value></block></value></block></next></block></statement><value name="IF1"><block type="logic_compare" id="T,$F:(itP0oT~L]Mi-HO"><field name="OP">EQ</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="lists_index_get" id="mB@/;SpQqbU@TXL8,hnY"><value name="LIST"><block type="variables_get" id="bR2P}(0,.)2oDzMZbv:%"><field name="VAR" id="HnB^tPUPb6HA|iCE^MoL">command_code</field></block></value><value name="INDEX"><shadow type="math_number" id="`-_466ED~{rNa{CPVJ;f"><field name="NUM">0</field></shadow></value></block></value><value name="B"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="text" id="[9+$UcneG;F!)P|/1j;$"><field name="TEXT">A</field></block></value></block></value><statement name="DO1"><block type="serial_writeline" id="ktM!wcYvveMIvWp,S~TD"><value name="text"><shadow type="text" id="0Cccdl1xQb?UDj)?S-bD"><field name="TEXT">requested pin activation</field></shadow></value><next><block type="function_call" id="fL6s3t6`{zKd1dN%m_U5"><mutation name="activatePin" functionid="SkAa^YVBlwL)t:p]6;z2"/></block></next></block></statement><value name="IF2"><block type="logic_compare" id="c,WSX^1{Ap3lMyl4JZ.U"><field name="OP">EQ</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="lists_index_get" id="ZV=^ptwjt*7?1D`.VJEq"><value name="LIST"><block type="variables_get" id="$?8y:$j1q({?we0^Lw]S"><field name="VAR" id="HnB^tPUPb6HA|iCE^MoL">command_code</field></block></value><value name="INDEX"><shadow type="math_number" id="?a+0T~W@!_rv_ee/,qWL"><field name="NUM">0</field></shadow></value></block></value><value name="B"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="text" id="p;$+{tlN[x-G~QaVY`VD"><field name="TEXT">D</field></block></value></block></value><statement name="DO2"><block type="serial_writeline" id="qd(Y;wO6N%a3pckXRiA6"><value name="text"><shadow type="text" id="=;m}_{^({}FXeeEhxZ]]"><field name="TEXT">requested pin deactivation</field></shadow></value><next><block type="function_call" id="$`Rq.!9y?`9Mk3xZ]Aj`"><mutation name="deActivatePin" functionid="i0#[ETnC9R3u]EC:%]4["/></block></next></block></statement><statement name="ELSE"><block type="serial_writeline" id="p6-_PReOfbdNSD{D1;jj"><value name="text"><shadow type="text" id="8RVv1TF^8J{J4$S1}`!{"><field name="TEXT">invalid command</field></shadow></value></block></statement></block></next></block></next></block></next></block></next></block></statement></block><block type="pxt-on-start" id="xRRgvHNlG#rZ^u`HECiY" x="-9" y="-163"><statement name="HANDLER"><block type="serial_writeline" id="{6$?SI8jd9kkDgGmmL5R"><value name="text"><shadow type="text" id="q3FA2i[r;JeKkgo_`kGB"><field name="TEXT">started</field></shadow></value><next><block type="function_call" id="emY5{Y(1p_2p88bVMyqu"><mutation name="basicBLEAdvertise" functionid="5V1#[uS_Y;AC(dP1*Q3b"/><next><block type="variables_set" id="tSvPpMk=5tye^ke%~PNj"><field name="VAR" id="jaC$%W6J:%CHA7?`dMz!">SYS_PASSWORD</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="text" id="83E7Rd9Z.)ZymnF:VxL!"><field name="TEXT">AAAA</field></block></value></block></next></block></next></block></statement></block><block type="bluetooth_on_connected" id="n*eY@#lcfgoVnfkowZqg" x="1274" y="-159"><statement name="HANDLER"><block type="serial_writeline" id="Q8(8~GLZpUl~]xdY^L5~"><value name="text"><shadow type="text" id="-/SGH1o.U-?{n~;?C6ea"><field name="TEXT">connected</field></shadow></value><next><block type="variables_set" id="#60?cSaDB8?W;XhPT3pD"><field name="VAR" id="VH3ZuJWh2B.|c{NngUGO">ble_connected</field><value name="VALUE"><shadow type="math_number" id="q=|F(m(Wi;#4hs^/$Wed"><field name="NUM">1</field></shadow></value><next><block type="serial_writeline" id="c(sMR2_BF/,hYFfY:b7Q"><value name="text"><shadow type="text" id="iDqHKsyEl,F{gZInV*;u"><field name="TEXT">waiting for password</field></shadow></value><next><block type="device_show_leds" id=":^7*L,;-%S_@L{LYz0Q*"><field name="LEDS">`&#10;        . . # . . &#10;        . . # . . &#10;        # . # . # &#10;        . # # # . &#10;        . . # . .&#10;        `</field></block></next></block></next></block></next></block></statement></block><block type="bluetooth_on_disconnected" id="D5]pSx2MIso+y9qC|=|t" x="1765" y="-161"><statement name="HANDLER"><block type="serial_writeline" id="r#|h8N*6a90E.S2NVauX"><value name="text"><shadow type="text" id="]JsdkQxr!9M^DoRD4M0I"><field name="TEXT">disconnected</field></shadow></value><next><block type="variables_set" id="y%{u+bDOJUX/e+7dIsl$"><field name="VAR" id="VH3ZuJWh2B.|c{NngUGO">ble_connected</field><value name="VALUE"><shadow type="math_number" id="}Ch68?w_qs/bN?f9+##}"><field name="NUM">-1</field></shadow></value><next><block type="device_show_leds" id=";,7z:06j=L3q1q2Y5h#P"><field name="LEDS">`&#10;        . . . . . &#10;        . # . # . &#10;        . . . . . &#10;        . # # # . &#10;        # . . . #&#10;        `</field><next><block type="eddystone_stop_advertising" id="~y[!JN+]My((99Ko90j*"><next><block type="function_call" id="Hn6kpJGdpm*I{y;3oMug"><mutation name="basicBLEAdvertise" functionid="5V1#[uS_Y;AC(dP1*Q3b"/></block></next></block></next></block></next></block></next></block></statement></block><block type="device_forever" id="8DjmZpe%GZP,O^e4b.@p" x="-5" y="96"/><block type="function_definition" id="V]H;[Au?q-Q$LvkL-a86" x="20" y="761"><mutation name="publishBLEServices" functionid="Wf|(pw7xsP_Ra=(k__^B"/><field name="function_name">publishBLEServices</field><statement name="STACK"><block type="bluetooth_start_button_service" id="w48aNjw66MMy9Oo-Ld0I"/></statement></block><block type="function_definition" id="^HDY^|12},rmv3Rhqi_W" x="387" y="761"><mutation name="basicBLEAdvertise" functionid="5V1#[uS_Y;AC(dP1*Q3b"/><field name="function_name">basicBLEAdvertise</field><statement name="STACK"><block type="eddystone_advertise_uid" id="|Z@Ap,OJ4Ma/MWKe|[dh"><value name="ns"><shadow type="math_number" id="/70y|l;r$04XcFM/JrJe"><field name="NUM">0</field></shadow></value><value name="instance"><shadow type="math_number" id="vua#Y{5mC-[-Wl0YtF`z"><field name="NUM">0</field></shadow></value><value name="power"><shadow type="math_number" id="KKP?kTr25Ia}8+=Rl0b%"><field name="NUM">7</field></shadow></value><value name="connectable"><shadow type="logic_boolean" id="Pq{6]WeqGS_;s?e*/e{H"><field name="BOOL">TRUE</field></shadow></value><next><block type="bluetooth_start_uart_service" id="~a,R0v,pzvdLg[Ah9v(e"><next><block type="device_show_leds" id="1.H~LsZktU;qXVI*M@~P"><field name="LEDS">`&#10;        # . # # . &#10;        . # # . # &#10;        . . # # . &#10;        . # # . # &#10;        # . # # .&#10;        `</field></block></next></block></next></block></statement></block><block type="function_definition" id="S[:Dr*eC(s%;wr^^B{30" x="765" y="761"><mutation name="cmdPassword" functionid="l{g]WzkQ{UUM#.%)vBrv"><arg name="pwd" id="iny9m8oh4ubr22u96zs2" type="string"/></mutation><field name="function_name">cmdPassword</field><value name="iny9m8oh4ubr22u96zs2"><shadow type="argument_reporter_string" id="7zZGSenW{jJ0{ezV}l]f"><field name="VALUE">pwd</field></shadow></value><statement name="STACK"><block type="serial_writeline" id=".:^YSex%z.Q!68d(UL}H"><value name="text"><block type="text_join" id="5%aR4i%e?c,wpBszEHU?"><mutation items="2"/><value name="ADD0"><shadow type="text" id="PD#[f{aiCHA;73;bK[)U"><field name="TEXT">received password:</field></shadow></value><value name="ADD1"><shadow type="text"><field name="TEXT"/></shadow><block type="argument_reporter_string" id="}~{EXSW4[NN:e#oMxEbt"><field name="VALUE">pwd</field></block></value></block></value><next><block type="controls_if" id="~7UP0=LaHR2^rAdbsfF8"><mutation else="1"/><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="N/#oa=~W^%FOF4!_k6#V"><field name="OP">EQ</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="argument_reporter_string" id="r8I(cmgQ#`Oxup=*7xu?"><field name="VALUE">pwd</field></block></value><value name="B"><shadow type="math_number" id="Jba4F,u~MokNsU0ZTg4c"><field name="NUM">0</field></shadow><block type="variables_get" id="NuW`0I_]AbrXwoS6`D;y"><field name="VAR" id="jaC$%W6J:%CHA7?`dMz!">SYS_PASSWORD</field></block></value></block></value><statement name="DO0"><block type="serial_writeline" id="{_%t^Od}$A^GB+a_|uOj"><value name="text"><shadow type="text" id="lq+lJkk[[d-Z6xEL;)_j"><field name="TEXT">password ok</field></shadow></value><next><block type="variables_set" id="A`F~?BqYN4N(i_1]z@5L"><field name="VAR" id="VH3ZuJWh2B.|c{NngUGO">ble_connected</field><value name="VALUE"><shadow type="math_number" id="M?_UUOdZ@YhVuI=7Thab"><field name="NUM">2</field></shadow></value><next><block type="function_call" id="84(_wrz{`$ICQOHD6D(A"><mutation name="publishBLEServices" functionid="Wf|(pw7xsP_Ra=(k__^B"/><next><block type="device_show_leds" id="s!u_C?_+/mK@o`:5(1FN"><field name="LEDS">`&#10;        . . . . . &#10;        . . . . # &#10;        . . . # . &#10;        # . # . . &#10;        . # . . .&#10;        `</field><next><block type="bluetooth_uart_write" id="r,s=7k3gP0y8oyQyXQS4"><value name="data"><shadow type="text" id=";(!dAoyFv8H5d|#-L604"><field name="TEXT">P:OK</field></shadow></value></block></next></block></next></block></next></block></next></block></statement><statement name="ELSE"><block type="serial_writeline" id="!@c$=9uX(V%55Q?k^iaK"><value name="text"><block type="text_join" id="V8.rMo2{]J;#1+_oEMyg"><mutation items="2"/><value name="ADD0"><shadow type="text" id=":W[c*av.N9q}x=E{*0[T"><field name="TEXT">wrong password:</field></shadow></value><value name="ADD1"><shadow type="text"><field name="TEXT"/></shadow><block type="argument_reporter_string" id="(Q~4eK+T+Q(_SnL85Ms:"><field name="VALUE">pwd</field></block></value></block></value><next><block type="bluetooth_uart_write" id="dazuRc#*9Q:mt[{X)H:/"><value name="data"><shadow type="text" id="/E0kQvApsJy8_`]dOz_e"><field name="TEXT">P:KO</field></shadow></value><next><block type="eddystone_stop_advertising" id="mM}3:P/pi/`R8EFR.6;;"><next><block type="function_call" id="Jsi;%CrD7pgUu,#JnBtn"><mutation name="basicBLEAdvertise" functionid="5V1#[uS_Y;AC(dP1*Q3b"/></block></next></block></next></block></next></block></statement></block></next></block></statement></block><block type="function_definition" id="QNRfdtXQ5sVpVdoB/w{X" x="1509" y="761"><mutation name="activatePin" functionid="SkAa^YVBlwL)t:p]6;z2"/><field name="function_name">activatePin</field><statement name="STACK"><block type="serial_writeline" id="zRFF2t^4BOQQm}MGT-p#"><value name="text"><shadow type="text" id="hv~yf:y-Bz^Dw0X(I^a3"><field name="TEXT">activatePin</field></shadow></value><next><block type="controls_if" id="v:VR!NdeZvQq{@09p%2V"><mutation else="1"/><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id=";OL|g)a;8_Wt:{a[|vk9"><field name="OP">EQ</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="|G#X|M^Vd*}K[/oU,{$1"><field name="VAR" id="VH3ZuJWh2B.|c{NngUGO">ble_connected</field></block></value><value name="B"><shadow type="math_number" id=",8c%O4;?^fs6]cADFQjl"><field name="NUM">2</field></shadow></value></block></value><statement name="DO0"><block type="serial_writeline" id="K/;_SYT%01?.3x}%rX%O"><value name="text"><shadow type="text" id="7mgfapukQ@Kl1G/AW7n-"><field name="TEXT">activating...</field></shadow></value><next><block type="device_set_digital_pin" id="hesiN|nb8,|70GDP)kjh"><field name="name">DigitalPin.P0</field><value name="value"><shadow type="math_number_minmax" id="jg==B![fJ-gQ8c=?U0U3"><mutation min="0" max="1" label="Number" precision="0"/><field name="SLIDER">1</field></shadow></value><next><block type="bluetooth_uart_write" id="PZ+@O3nXxen`Qq$;=H3/"><value name="data"><shadow type="text" id=".7DFfeP{.XH//aJPj]5B"><field name="TEXT">A:OK</field></shadow></value></block></next></block></next></block></statement><statement name="ELSE"><block type="serial_writeline" id="U1$-,nCuYW-N?HcUh(R!"><value name="text"><shadow type="text" id="HovyDx[uf.`Uqz$G/]8_"><field name="TEXT">access denied</field></shadow></value><next><block type="bluetooth_uart_write" id="F3O_WN^vyaPt[B[2l8T@"><value name="data"><shadow type="text" id="}k3nRcC:YHh]gSe=PU!G"><field name="TEXT">A:KO</field></shadow></value></block></next></block></statement></block></next></block></statement></block><block type="function_definition" id="3Qn3~,Jp5Zou:T4rIsaY" x="2084" y="753"><mutation name="deActivatePin" functionid="i0#[ETnC9R3u]EC:%]4["/><field name="function_name">deActivatePin</field><statement name="STACK"><block type="serial_writeline" id="$}|/DePR7gDqH18N+ZCF"><value name="text"><shadow type="text" id="7|/E^^]WQjyqpQlWenw7"><field name="TEXT">activatePin</field></shadow></value><next><block type="controls_if" id="/JGqpBT7Kz%Q}LOJbQKc"><mutation else="1"/><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="JCx|?E;0R}r1Z!s44n;Z"><field name="OP">EQ</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="l!]~s#U+M^A}^/hdBsJc"><field name="VAR" id="VH3ZuJWh2B.|c{NngUGO">ble_connected</field></block></value><value name="B"><shadow type="math_number" id="CT4LJRI4X#/*Xi!1m6^c"><field name="NUM">2</field></shadow></value></block></value><statement name="DO0"><block type="serial_writeline" id="SG|0kh.$8Y2m*,2`dmF]"><value name="text"><shadow type="text" id="L,|+40vC!*iTBVJ_HF!e"><field name="TEXT">deactivating...</field></shadow></value><next><block type="device_set_digital_pin" id="Ciyc$F.|$4Cw/H9-scjK"><field name="name">DigitalPin.P0</field><value name="value"><shadow type="math_number_minmax" id="PMo~UULMIRPa,GQb~cRn"><mutation min="0" max="1" label="Number" precision="0"/><field name="SLIDER">0</field></shadow></value><next><block type="bluetooth_uart_write" id="b;WeJr7;3Y$8C_nHj6LG"><value name="data"><shadow type="text" id="tU~5^r]{oA;J?Ill@5N-"><field name="TEXT">A:OK</field></shadow></value></block></next></block></next></block></statement><statement name="ELSE"><block type="serial_writeline" id="Q+NB]VEMq3DMnVdZS;D="><value name="text"><shadow type="text" id="!eCaS-(Hw-InjZ(2BRJN"><field name="TEXT">access denied</field></shadow></value><next><block type="bluetooth_uart_write" id="=@*uCT{~W#{+}jkl3t*A"><value name="data"><shadow type="text" id="RH,{Uog{(+_]vK}$xu89"><field name="TEXT">A:KO</field></shadow></value></block></next></block></statement></block></next></block></statement></block><block type="device_button_event" id="z7pk8@U_L7H6.6lAMGuA" x="2601" y="773"><field name="NAME">Button.A</field><statement name="HANDLER"><block type="controls_if" id="`KK{g)|[icW(79pTSm;+"><mutation else="1"/><value name="IF0"><shadow type="logic_boolean" id="F~fNuzB|C%#s$^oWb;.e"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="R,WgCp^@7rbYck?@0,U*"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="B[y9Ck!eh2$fi{},aN(`"><field name="NUM">0</field></shadow><block type="device_get_digital_pin" id="[vV$LW?lFK*E%B.Hu$)$"><field name="name">DigitalPin.P0</field></block></value><value name="B"><shadow type="math_number" id="d0%GK$D5-_mvEz/))?Rz"><field name="NUM">0</field></shadow></value></block></value><statement name="DO0"><block type="device_set_digital_pin" id="LC^M8T2p;2/8)bUsyLN^"><field name="name">DigitalPin.P1</field><value name="value"><shadow type="math_number_minmax" id="HR?Pm/HJE^6btGnojQ,J"><mutation min="0" max="1" label="Value" precision="0"/><field name="SLIDER">1</field></shadow></value></block></statement><statement name="ELSE"><block type="device_set_digital_pin" id="G--P/%By=OAnPYDB:sp2"><field name="name">DigitalPin.P1</field><value name="value"><shadow type="math_number_minmax" id="#S6pDRXy?WwAQeXw}m3C"><mutation min="0" max="1" label="Value" precision="0"/><field name="SLIDER">0</field></shadow></value></block></statement></block></statement></block></xml>